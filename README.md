# お悔やみ情報 CATV配信システム

都留市役所から送信されるお悔やみ情報を自動的にパワーポイントに変換し、CATVで放映できる形式で配信するシステム。

## 背景

- 都留市役所がお悔やみ情報をサンニチ新聞にメールで送付している
- 同じ情報をCATVでも配信したいという要望がある
- 手動での変換作業を自動化し、運用負荷を軽減する

## システムフロー

```
1. 市役所がお悔やみ情報（PDF添付）を指定メールアドレスに送信
2. システムがメール受信 → PDF解析 → パワーポイント自動生成
3. 市担当者が管理画面でプレビュー・確認・承認
4. 承認後、システムが自動でCATVにメール送信
```

## 機能

### 自動処理
- メール受信（PDF添付）
- PDF解析・お悔やみ情報抽出
- パワーポイント自動生成
- CATV向けメール自動送信

### 管理画面
- 受信履歴一覧
- パワーポイントプレビュー
- 承認機能
- 手動アップロード（修正時）
- 送信履歴

## 掲載項目

| 項目 | 説明 |
|-----|-----|
| 故人名 | 氏名 |
| 年齢 | 享年 |
| 喪主名 | 喪主の氏名 |
| 続柄 | 喪主との関係（妻、長男など） |
| 通夜 | 日時 |
| 告別式 | 日時 |
| 会場 | 斎場名 |

## 技術スタック

| コンポーネント | 技術 |
|--------------|------|
| バックエンド | Laravel (PHP) |
| PDF解析 | Python (PyMuPDF / pdfplumber) |
| パワポ生成 | python-pptx |
| 管理画面 | Laravel + Blade / Vue.js |
| データベース | MySQL |
| メール受信 | AWS SES / Mailgun |
| インフラ | AWS / VPS |

## ドキュメント

- [システム仕様書](spec-okuyami-catv.md)
- [提案資料](proposal-okuyami-catv.html) - ブラウザで開いてスライド表示

## 運用

- 頻度: 1日1回
- 関係者: 市役所、市担当者、CATV
